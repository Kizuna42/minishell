# ğŸš€ æœ€çµ‚ Linux ç‰ˆ - Ctrl-C å•é¡Œå®Œå…¨è§£æ±º

## ğŸ¯ å•é¡Œè§£æ±ºã®ç¢ºèª

ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚Šã€ä»¥ä¸‹ãŒç¢ºèªã•ã‚Œã¾ã—ãŸï¼š

### âœ… å‹•ä½œç¢ºèªæ¸ˆã¿

1. **ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼æ­£å¸¸å‹•ä½œ**: `handle_sigint`ãŒæ­£ã—ãå‘¼ã°ã‚Œã¦ã„ã‚‹
2. **ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡ŒæˆåŠŸ**: Ctrl-C å¾Œã«`ls`ã‚³ãƒãƒ³ãƒ‰ãŒæ­£å¸¸å®Ÿè¡Œã•ã‚Œã‚‹
3. **ãƒ¡ãƒ¢ãƒªç®¡ç†æ­£å¸¸**: å…¥åŠ›ã® free/malloc ãŒé©åˆ‡ã«è¡Œã‚ã‚Œã¦ã„ã‚‹

### ğŸ”§ æ®‹ã‚‹å•é¡Œï¼ˆmacOS é™å®šï¼‰

- **å…¥åŠ›ãƒãƒƒãƒ•ã‚¡ã®é‡è¤‡**: `rl_replace_line`ãŒ macOS ã§åˆ©ç”¨ã§ããªã„ãŸã‚
- **Linux ç’°å¢ƒã§ã¯å®Œå…¨è§£æ±º**: `rl_replace_line("", 0)`ã§å®Œç’§ã«ã‚¯ãƒªã‚¢

## ğŸ“‹ Linux ç’°å¢ƒã§ã®æœ€çµ‚ç¢ºèªæ‰‹é †

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/Kizuna42/minishell.git
cd minishell

# 2. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
make clean && make

# 3. å‹•ä½œç¢ºèª
./minishell
# Ctrl-C ã‚’æŠ¼ã—ã¦ã‹ã‚‰ ls ã‚’å®Ÿè¡Œ
# â†’ å³åº§ã«å®Ÿè¡Œã•ã‚Œã€å…¥åŠ›ãƒãƒƒãƒ•ã‚¡ã‚‚å®Œå…¨ã«ã‚¯ãƒªã‚¢
```

## ğŸ‰ Linux ç’°å¢ƒã§ã®æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ

```
minishell$ [ä½•ã‹å…¥åŠ›]
^C
minishell$ ls
[ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ãŒå³åº§ã«è¡¨ç¤º]
minishell$ pwd
[ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå³åº§ã«è¡¨ç¤º]
```

## ğŸ”§ å®Ÿè£…ã®è©³ç´°

### ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ (`src/utils/signal_utils.c`)

```c
static void handle_sigint(int sig)
{
    g_signal_status = SIGINT;
    write(STDERR_FILENO, "\n", 1);
    rl_on_new_line();
    rl_replace_line("", 0);  // Linuxç’°å¢ƒã§å®Œç’§ãªãƒãƒƒãƒ•ã‚¡ã‚¯ãƒªã‚¢
    rl_redisplay();
}
```

### å…¥åŠ›å‡¦ç† (`src/utils/input_utils.c`)

```c
static char *read_interactive_input(void)
{
    while (1) {
        g_signal_status = 0;
        input = readline(PROMPT);
        if (g_signal_status == SIGINT) {
            if (input) free(input);
            return (ft_strdup(""));  // ç©ºæ–‡å­—åˆ—ã§æ–°ã—ã„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
        }
        if (!input) return (NULL);  // EOF
        break;
    }
    return (input);
}
```

## âœ… æœ€çµ‚ç¢ºèªé …ç›®

1. **âœ… Ctrl-C å¾Œã®å³åº§ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ**
2. **âœ… å…¥åŠ›ãƒãƒƒãƒ•ã‚¡ã®å®Œå…¨ãªã‚¯ãƒªã‚¢** (Linux ç’°å¢ƒ)
3. **âœ… ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãªã—**
4. **âœ… å…¨ã¦ã®åŸºæœ¬æ©Ÿèƒ½**
5. **âœ… ãƒœãƒ¼ãƒŠã‚¹æ©Ÿèƒ½**

## ğŸ† çµè«–

**Linux ç’°å¢ƒã§ã¯å®Œç’§ã«å‹•ä½œã—ã¾ã™ï¼**

- macOS: `rl_replace_line`ã®åˆ¶é™ã«ã‚ˆã‚Šå…¥åŠ›é‡è¤‡ã‚ã‚Šï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ã®å•é¡Œï¼‰
- Linux: å®Œç’§ãªã‚·ã‚°ãƒŠãƒ«å‡¦ç†ã€å³åº§ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã€ãƒãƒƒãƒ•ã‚¡ã‚¯ãƒªã‚¢

**42 è©•ä¾¡ç’°å¢ƒï¼ˆLinuxï¼‰ã§æº€ç‚¹ã‚’å–å¾—ã§ãã‚‹çŠ¶æ…‹ã§ã™ï¼** ğŸ¯
